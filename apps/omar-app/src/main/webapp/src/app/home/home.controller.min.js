!function(){"use strict";function e(e,t){function a(e){(10===e.keyCode||13===e.keyCode)&&e.preventDefault()}function r(){f.val("")}function o(){var e=p.val();switch(e){case"place":n();break;case"coordinate":s();break;default:console.log("nothing selected")}return"changeSearchType fired"}function n(){f.val(""),f.attr("placeholder","Search by place"),f.autocomplete("enable"),l=i+"/?responseIncludes=WKT_GEOMETRY_SIMPLIFIED&autocomplete=true&maxInterpretations=10&autocompleteBias=BALANCED",f.autocomplete({serviceUrl:l,minChars:3,dataType:"json",type:"GET",transformResult:function(e){return{suggestions:$.map(e.interpretations,function(e){return console.log(e),{value:e.feature.displayName,data:e.feature.displayName,lat:e.feature.geometry.center.lat,lng:e.feature.geometry.center.lng,bounds:e.feature.geometry.bounds,wkt:e.feature.geometry.wktGeometrySimplified}})}},onSelect:function(e){var a;void 0===e.bounds?(console.log("bounds is undefined!"),a=JSON.stringify(e),t.go("map",{mapParams:a,maxFeatures:"10"})):(a=JSON.stringify(e),t.go("map",{mapParams:a,maxFeatures:"10"}))}})}function s(){f.val(""),f.attr("placeholder","Search by coordinate"),f.autocomplete("disable")}var c=this,i=(e.services.twofishes.url,e.services.twofishes.proxy);c.title="Search for imagery",c.titleMessage="Find by place name or coordinates",$(".selectpicker").selectpicker("show");var l,u=$("#searchForm"),p=u.find("#searchSelect"),f=u.find("#searchInput"),m=(u.find("#searchButton"),u.find("#clearSearchButton"));u.keypress(a),p.on("change",o),m.on("click",r),n()}angular.module("omarApp").controller("HomeController",["APP_CONFIG","$state",e])}();
