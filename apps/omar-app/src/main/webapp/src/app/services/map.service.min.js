!function(){"use strict";function e(e){function o(e,o,t,n){console.log("zoomTo firing!"),r(),l.getView().setCenter([parseFloat(o),parseFloat(e)]),l.getView().setZoom(t),n&&a(parseFloat(e),parseFloat(o),i)}function t(e){n(i);var o=new ol.Feature({geometry:new ol.geom.Point([e.bounds.ne.lng,e.bounds.ne.lat])}),t=new ol.Feature({geometry:new ol.geom.Point([e.bounds.sw.lng,e.bounds.sw.lat])});i.getSource().addFeatures([o,t]);var r=i.getSource().getExtent();l.getView().fit(r,l.getSize()),i.getSource().clear(),void 0!==e.wkt?(c=new ol.format.WKT,u=c.readFeature(e.wkt,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}),u.setStyle(m),i.getSource().addFeatures([u])):a(e.lat,e.lng,i)}function r(){var e=+new Date,o=ol.animation.pan({duration:750,source:l.getView().getCenter(),start:e}),t=ol.animation.zoom({duration:1e3,resolution:l.getView().getResolution()});l.beforeRender(t,o)}function n(e){e.getSource().getFeatures().length>=1&&e.getSource().clear()}function a(e,o,t){n(t);var r=new ol.Feature({geometry:new ol.geom.Point([parseFloat(o),parseFloat(e)])});r.setStyle(g),t.getSource().addFeatures([r])}var l,s,i,c,u,g,m,w=e.services.basemaps.osm.url,p=e.services.basemaps.osm.layers,S=e.services.omar.url,d=e.services.omar.port,y=e.services.omar.footprintsUrl,f=16;g=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,46],anchorXUnits:"fraction",anchorYUnits:"pixels",opacity:.75,src:"images/search_marker_green.png"})}),m=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 100, 50, 0.2)"}),stroke:new ol.style.Stroke({width:1.5,color:"rgba(255, 100, 50, 0.6)"})}),i=new ol.layer.Vector({source:new ol.source.Vector}),this.mapInit=function(e){console.log("mapParams",e),s=new ol.View({center:[0,0],projection:"EPSG:4326",zoom:12,minZoom:3,maxZoom:18}),l=new ol.Map({layers:[new ol.layer.Tile({source:new ol.source.TileWMS({url:w,params:{LAYERS:p,TILED:!0},serverType:"geoserver"})}),new ol.layer.Tile({source:new ol.source.TileWMS({url:S+d+y,params:{VERSION:"1.1.1",SRS:"EPSG:3857",LAYERS:"Imagery",FORMAT:"image/png",STYLES:"byFileType"}})})],controls:ol.control.defaults({attributionOptions:{collapsible:!1}}),target:"map",view:s}),l.addLayer(i),void 0===e?o(33.3116664,44.2858655,4):void 0!==e&&void 0===e.bounds?o(e.lat,e.lng,f,!0):t(e)},this.resizeElement=function(e,o){console.log("resizing"),$(e).animate({height:$(window).height()-o},10,function(){l.updateSize()})}}angular.module("omarApp").service("mapService",["APP_CONFIG",e])}();